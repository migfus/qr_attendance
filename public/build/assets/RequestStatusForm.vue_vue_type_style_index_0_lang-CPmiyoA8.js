import{d as E,a as $,r as C,X as L,k as F,W as D,I as H,c as u,o as d,b as a,w as i,e as r,y as M,z as Y,n as V,u as n,ac as J,J as S,m as O,_ as p,v as f,an as Q,Q as U,R as G,g as W,A as X,x as K,i as Z,D as g,a9 as k}from"./app-BOkKnMk8.js";import{B as ee}from"./BasicCard-ClXIXozC.js";import{_ as te}from"./AppToggle.vue_vue_type_script_setup_true_lang-BJrnlHNF.js";import{_ as oe}from"./ConfirmationPrompt.vue_vue_type_script_setup_true_lang-DCGSrIAe.js";import{_ as T}from"./AppTextArea.vue_vue_type_script_setup_true_lang-Bn83_HaO.js";import{_ as se}from"./AppCheckbox.vue_vue_type_script_setup_true_lang-DlampZ7V.js";import{_ as ae}from"./FormModal.vue_vue_type_script_setup_true_lang-BPnbyYLp.js";import{r as y}from"./SparklesIcon-Dzomtyg1.js";import{r as ne}from"./PaperAirplaneIcon-VjKR_m3E.js";import{r as re}from"./PencilIcon-CQul3KT8.js";import{r as le}from"./CheckIcon-C5b3kr33.js";import{r as ie}from"./Square2StackIcon-Cc__3gcb.js";const ue={class:"flex gap-8 mb-2"},de={class:"text-red-500 text-sm font-semibold"},me={class:"flex flex-col xl:flex-row justify-between mt-4"},pe={class:"flex gap-2"},fe={class:"flex flex-col xl:flex-row gap-2 mt-4 xl:mt-0"},ce={class:"flex flex-col gap-2"},_e={class:"rounded-xl mx-2"},ge={class:"flex flex-col gap-2"},ye=["src"],ve={key:1,src:"https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/google-gemini-icon.png",class:"size-4 rounded-full"},xe={key:0,class:"flex justify-end absolute bottom-0 right-0 p-4 opacity-0 group-hover:opacity-80 transition-all"},be={style:{"white-space":"pre-line"},class:"dark:text-neutral-200"},Ve={class:"flex justify-end gap-2"},Ie=E({__name:"RequestStatusForm",props:{employee_email:{},request_status_types:{},latest_request_status_id:{},employee_id:{}},setup(c){const s=$(q()),v=C(!1),h=L("confirm_update_status",!1),x=C(),b=L("apply_from_template",!0),A=J(),_=F(),t=$({open:!1,prompt:"",replies:[],loading:!1}),m=D("scrollGemini");function I(){h.value?w():v.value=!0}function w(){Z.put(route("dashboard.arta-id.update",{arta_id:c.employee_id}),{request_status_type_id:s.request_status_type?.id,content:s.content,notify_email:s.notify_email,type:"request-status"},{preserveState:!0,onError:l=>{x.value=l},onSuccess:()=>{Object.assign(s,q())}})}function q(){return{content:"",notify_email:!0,request_status_type:c.request_status_types[0]}}H(()=>s.request_status_type,()=>{s.request_status_type?.name!==void 0&&j(s.request_status_type?.name||"")});function j(l){if(localStorage.getItem("apply_from_template")==="false"){s.content="";return}_.props.auth?.user_settings.request_status_messages[l]!==void 0?s.content=_.props.auth?.user_settings.request_status_messages[l]:s.content=""}async function N(){t.loading=!0;const{data:l}=await g.post(route("dashboard.gemini.store"),{prompt:t.prompt,request_status_type:s.request_status_type.name});if(t.replies=l.chat,t.loading=!1,t.prompt="",await k(),m.value){const e=m.value;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}}async function P(){t.open=!0,t.loading=!0;const{data:l}=await g.get(route("dashboard.gemini.index"));if(t.replies=l.chat,t.loading=!1,await k(),m.value){const e=m.value;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}}async function R(){t.loading=!0;const{data:l}=await g.post(route("dashboard.gemini.store"),{prompt:`Can you reprhase this? ${s.content}`,request_status_type:s.request_status_type.name});if(t.replies=l.chat,t.loading=!1,t.prompt="",t.open=!0,await k(),m.value){const e=m.value;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}}async function z(){t.prompt="",t.loading=!0;const{data:l}=await g.delete(route("dashboard.gemini.destroy",{gemini:1}));t.replies=[],t.loading=!1}return(l,e)=>(d(),u("div",null,[a(ee,{title:"Update Status",description:"Update request status",icon:n(re)},{default:i(()=>[r("form",{onSubmit:e[6]||(e[6]=M(o=>I(),["prevent"])),class:"flex flex-col"},[a(Y,{name:"Status Type",data:c.request_status_types,modelValue:s.request_status_type,"onUpdate:modelValue":e[0]||(e[0]=o=>s.request_status_type=o)},null,8,["data","modelValue"]),r("div",ue,[a(te,{name:`Email to ${c.employee_email}`,modelValue:s.notify_email,"onUpdate:modelValue":e[1]||(e[1]=o=>s.notify_email=o)},null,8,["name","modelValue"])]),r("div",{class:V(n(A)=="dark"?"quill-editor-dark":"")},[a(T,{name:"Content",modelValue:s.content,"onUpdate:modelValue":e[2]||(e[2]=o=>s.content=o),error:x.value?.content,noLabel:""},null,8,["modelValue","error"])],2),r("span",de,S(x.value?.content),1),r("div",me,[r("div",pe,[a(se,{name:"Auto apply from template",modelValue:n(b),"onUpdate:modelValue":e[3]||(e[3]=o=>O(b)?b.value=o:null)},null,8,["modelValue"])]),r("div",fe,[a(p,{icon:n(y),type:"button",onClick:e[4]||(e[4]=o=>P()),forceLoading:t.loading},{default:i(()=>[...e[14]||(e[14]=[f(" Ask AI ",-1)])]),_:1},8,["icon","forceLoading"]),a(p,{icon:n(y),type:"button",onClick:e[5]||(e[5]=o=>R()),forceLoading:t.loading},{default:i(()=>[...e[15]||(e[15]=[f(" Rephrase ",-1)])]),_:1},8,["icon","forceLoading"]),a(p,{icon:n(ne),color:"brand",disabled:!n(Q)(["ARTA ID/Update/All"],n(_).props.auth?.permissions)},{default:i(()=>[...e[16]||(e[16]=[f(" Notify ",-1)])]),_:1},8,["icon","disabled"])])])],32)]),_:1},8,["icon"]),a(oe,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=o=>v.value=o),confirmIcon:n(le),confirmMessage:"Yes, confirmed.",title:"Confirm?",id:"confirm_update_status",onConfirm:e[8]||(e[8]=o=>w())},{default:i(()=>[...e[17]||(e[17]=[r("li",null,"Confirm all are correct?",-1)])]),_:1},8,["modelValue","confirmIcon"]),a(ae,{title:"Generate Entry",icon:n(y),description:"Powered by Google Gemini",modelValue:t.open,"onUpdate:modelValue":e[13]||(e[13]=o=>t.open=o)},{default:i(()=>[r("div",ce,[r("div",{class:"flex flex-col gap-2 h-[calc(70vh-5rem)] overflow-y-auto",ref_key:"scrollGemini",ref:m},[(d(!0),u(U,null,G(t.replies,o=>(d(),u("div",_e,[r("div",ge,[r("div",{class:V([o.role=="user"?"justify-end":"justify-start","flex"])},[o.role=="user"?(d(),u("img",{key:0,src:n(_).props.auth?.avatar_url,class:"size-8 rounded-full"},null,8,ye)):(d(),u("img",ve))],2),(d(!0),u(U,null,G(o.parts,B=>(d(),u("div",{class:V([o.role=="user"?"rounded-l-xl rounded-br-xl ml-2":"rounded-r-xl rounded-bl-xl mr-2","bg-brand-50 dark:bg-dark-001 p-4 relative group"])},[o.role=="model"?(d(),u("div",xe,[a(p,{icon:n(ie),onClick:()=>{s.content=o.parts[0].text,t.open=!1},size:"sm"},{default:i(()=>[...e[18]||(e[18]=[f(" Insert ",-1)])]),_:1},8,["icon","onClick"])])):W("",!0),r("div",be,S(B.text),1)],2))),256))])]))),256))],512),a(T,{name:"Your Prompt",modelValue:t.prompt,"onUpdate:modelValue":e[9]||(e[9]=o=>t.prompt=o)},null,8,["modelValue"]),r("div",Ve,[a(p,{icon:n(y),onClick:e[10]||(e[10]=o=>N()),forceLoading:t.loading,color:"brand"},{default:i(()=>[...e[19]||(e[19]=[f("Ask",-1)])]),_:1},8,["icon","forceLoading"]),a(p,{icon:n(X),onClick:e[11]||(e[11]=o=>z()),forceLoading:t.loading},{default:i(()=>[...e[20]||(e[20]=[f(" New ",-1)])]),_:1},8,["icon","forceLoading"]),a(p,{icon:n(K),onClick:e[12]||(e[12]=()=>{t.open=!1,t.prompt=""})},{default:i(()=>[...e[21]||(e[21]=[f(" Close ",-1)])]),_:1},8,["icon"])])])]),_:1},8,["icon","modelValue"])]))}});export{Ie as _};
