import{d as k,r as v,a as B,a7 as Q,c as E,o as p,b as r,e as d,g as L,w as u,y as P,z as b,_ as y,u as m,A as F,v as N,ag as R,ah as O,Q as U,R as j,f as z,x as W,n as q,D as T}from"./app-BOkKnMk8.js";import{_ as X}from"./AppInput.vue_vue_type_script_setup_true_lang-Bd-6u1aG.js";import{B as V}from"./BasicCard-ClXIXozC.js";import{_ as H}from"./QRCode.vue_vue_type_script_setup_true_lang-BLevW_ln.js";import{_ as Z}from"./Unedited.vue_vue_type_script_setup_true_lang-B_PPEncA.js";import{r as J}from"./ClipboardIcon-CnAcX3np.js";import"./qrcode.vue.esm-DhVb-LSs.js";import"./CheckIcon-C5b3kr33.js";import"./Square2StackIcon-Cc__3gcb.js";import"./ArrowDownOnSquareIcon-Cj4hYOxG.js";import"./TrashIcon-CpbmzRkx.js";const h="0123456789ABCDEFGHJKMNPQRSTVWXYZ",_=32,K=16,$=10,M=0xffffffffffff;var c;(function(e){e.Base32IncorrectEncoding="B32_ENC_INVALID",e.DecodeTimeInvalidCharacter="DEC_TIME_CHAR",e.DecodeTimeValueMalformed="DEC_TIME_MALFORMED",e.EncodeTimeNegative="ENC_TIME_NEG",e.EncodeTimeSizeExceeded="ENC_TIME_SIZE_EXCEED",e.EncodeTimeValueMalformed="ENC_TIME_MALFORMED",e.PRNGDetectFailure="PRNG_DETECT",e.ULIDInvalid="ULID_INVALID",e.Unexpected="UNEXPECTED",e.UUIDInvalid="UUID_INVALID"})(c||(c={}));class f extends Error{constructor(t,n){super(`${n} (${t})`),this.name="ULIDError",this.code=t}}function Y(e){const t=Math.floor(e()*_)%_;return h.charAt(t)}function ee(e){const t=te(),n=t&&(t.crypto||t.msCrypto)||null;if(typeof n?.getRandomValues=="function")return()=>{const l=new Uint8Array(1);return n.getRandomValues(l),l[0]/255};if(typeof n?.randomBytes=="function")return()=>n.randomBytes(1).readUInt8()/255;throw new f(c.PRNGDetectFailure,"Failed to find a reliable PRNG")}function te(){return oe()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}function ae(e,t){let n="";for(;e>0;e--)n=Y(t)+n;return n}function ne(e,t=$){if(isNaN(e))throw new f(c.EncodeTimeValueMalformed,`Time must be a number: ${e}`);if(e>M)throw new f(c.EncodeTimeSizeExceeded,`Cannot encode a time larger than ${M}: ${e}`);if(e<0)throw new f(c.EncodeTimeNegative,`Time must be positive: ${e}`);if(Number.isInteger(e)===!1)throw new f(c.EncodeTimeValueMalformed,`Time must be an integer: ${e}`);let n,l="";for(let o=t;o>0;o--)n=e%_,l=h.charAt(n)+l,e=(e-n)/_;return l}function oe(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function C(e,t){const n=ee(),l=Date.now();return ne(l,$)+ae(K,n)}const se={class:"col-span-3 lg:col-span-1 xl:col-span-1"},le={class:"flex flex-col font-medium text-brand-700"},ie={class:"grid grid-cols-1 gap-4"},re={class:"flex flex-col gap-4"},de={class:"flex justify-end mt-4 gap-2"},ce={class:"flex flex-col justify-between"},ue={class:"flex flex-col font-medium text-brand-700"},me={class:"flex justify-end mt-4 gap-2"},Re=k({__name:"(Index)",props:{employee_statuses:{},departments:{}},setup(e){const t=v([]),n=v(),l=v(!1),o=B(g());function D(){localStorage.setItem("guest_id",C()),x()}async function x(){try{const{data:i}=await T.get("/api/guest-qr",{params:{guest_id:localStorage.getItem("guest_id")}});t.value=i}catch{}}async function A(){l.value=!0;try{const{data:i}=await T.post("/api/guest-qr",{guest_id:localStorage.getItem("guest_id"),name:o.employee_name,department_id:o.selected_office.id,status_id:o.status.id});t.value.unshift({id:i.id,name:i.name,department:i.department,status:i.status}),Object.assign(o,g()),w()}catch{}l.value=!1}async function G(i,a){try{await T.delete(`/api/guest-qr/${i}`),t.value.splice(a,1)}catch{t.value.splice(a,1)}}function S(){localStorage.getItem("guest_id")||localStorage.setItem("guest_id",C())}function w(){n.value.scrollIntoView({behavior:"smooth"})}function g(){return{employee_name:"",selected_office:{id:1,name:"College of Agriculture"},status:{id:1,name:"Permanent"}}}return Q(()=>{S(),x()}),(i,a)=>(p(),E("div",{class:q(["py-4 justify-center gap-4",t.value.length>0?"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3":"grid sm:flex grid-cols-1"])},[r(Z),d("div",se,[r(V,{title:"Generate QR Attendance",description:"Generate QR Attendance",icon:m(R),size:t.value.length>0?"lg":"sm"},{default:u(()=>[d("form",{onSubmit:a[4]||(a[4]=P(s=>A(),["prevent"]))},[d("div",le,[d("div",ie,[d("div",re,[r(X,{name:"Name",modelValue:o.employee_name,"onUpdate:modelValue":a[0]||(a[0]=s=>o.employee_name=s),placeholder:"Last, First MI. Ext.",uppercase:""},null,8,["modelValue"]),r(b,{data:e.departments,modelValue:o.selected_office,"onUpdate:modelValue":a[1]||(a[1]=s=>o.selected_office=s),name:"Office"},null,8,["data","modelValue"]),r(b,{data:e.employee_statuses,modelValue:o.status,"onUpdate:modelValue":a[2]||(a[2]=s=>o.status=s),name:"Status"},null,8,["data","modelValue"])])])]),d("div",de,[r(y,{type:"button",icon:m(F),onClick:a[3]||(a[3]=s=>Object.assign(o,g()))},{default:u(()=>[...a[6]||(a[6]=[N("Reset",-1)])]),_:1},8,["icon"]),r(y,{color:"brand",icon:m(R),disabled:o.employee_name==""||l.value,forceLoading:l.value},{default:u(()=>[...a[7]||(a[7]=[N("Generate",-1)])]),_:1},8,["icon","disabled","forceLoading"])])],32)]),_:1},8,["icon","size"])]),t.value.length>0?(p(),E("div",{key:0,class:"col-span-3 lg:col-span-1 xl:col-span-2",ref_key:"scrollTo",ref:n},[r(V,{title:"Saved QR",description:"Generate QR Attendance",icon:m(J)},{default:u(()=>[d("div",ce,[d("div",ue,[r(O,{class:"flex gap-4 flex-wrap"},{default:u(()=>[(p(!0),E(U,null,j(t.value,(s,I)=>(p(),z(H,{key:I,employee_name:s.name,selected_office:s.department,status:s.status,id:s.id,onRemove:fe=>G(s.id,I),class:"h-auto w-[253px]"},null,8,["employee_name","selected_office","status","id","onRemove"]))),128))]),_:1})]),d("div",me,[r(y,{icon:m(W),onClick:a[5]||(a[5]=s=>D())},{default:u(()=>[...a[8]||(a[8]=[N("Clear All",-1)])]),_:1},8,["icon"])])])]),_:1},8,["icon"])],512)):L("",!0)],2))}});export{Re as default};
