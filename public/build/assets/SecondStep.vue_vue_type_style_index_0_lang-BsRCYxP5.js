import{c as b,o as l,e as a,d as R,p as $,r as f,q as y,H as I,I as D,b as p,g as C,J as M,u,K as N,w as g,L as _,M as T,N as U,f as x,O as q,P as F,Q as z,R as O,T as P,n as j,y as A,U as E,z as H,_ as L,v as S,C as J,D as K}from"./app-BOkKnMk8.js";import{B as Q}from"./BasicCard-ClXIXozC.js";import{r as Z}from"./CheckIcon-C5b3kr33.js";import{r as G}from"./ArrowLeftIcon-ad8tfL7s.js";import{r as W}from"./ArrowRightIcon-D_ciWIjH.js";function X(t,h){return l(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}const Y=["for"],ee={class:"flex-auto"},te=["name"],se={class:"flex flex-col z-10 absolute mt-10 w-full"},ae={class:"flex items-center gap-2"},oe=["src"],le={class:"line-clamp-2"},re={key:0,class:"block text-sm font-medium text-red-600"},B=R({__name:"AppSuggestInput",props:$({name:{},suggestions:{},errors:{}},{modelValue:{default:""},modelModifiers:{}}),emits:$(["search"],["update:modelValue"]),setup(t,{emit:h}){const i=f(!1),r=y(t,"modelValue"),n=f(!1),V=f(null),w=f(!1),m=I(()=>r.value?t.suggestions.filter(d=>{const s=r.value.toLowerCase();return d.short_name?d.name.toLowerCase().includes(s)||d.short_name.toLowerCase().includes(s):d.name.toLowerCase().includes(s)}):t.suggestions);D([m,i],([d,s])=>{w.value?(n.value=!1,w.value=!1):d.length>0&&s?n.value=!0:n.value=!1});function k(d){r.value=d,n.value=!1,w.value=!0}return(d,s)=>(l(),b("div",null,[a("label",{for:t.name,class:"text-brand-700 dark:text-neutral-200 font-semibold text-sm"},M(t.name),9,Y),p(u(N),{as:"div",class:"relative text-left w-full flex"},{default:g(()=>[a("div",ee,[_(a("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>r.value=o),name:t.name,class:"rounded-l-xl bg-wite dark:bg-dark-001 h-10 flex-auto border border-brand-200 dark:border-neutral-600 text-sm w-full px-3",onFocus:s[1]||(s[1]=o=>i.value=!0),onBlur:s[2]||(s[2]=o=>i.value=!1)},null,40,te),[[T,r.value]])]),p(u(U),{class:""},{default:g(()=>[a("button",{onClick:s[3]||(s[3]=()=>{i.value=!0,n.value=!n.value}),class:"rounded-r-lg px-2 py-2 bg-brand-600 dark:bg-brand-700 border border-brand-600 dark:border-brand-600 cursor-pointer",type:"button"},[m.value.length>0?(l(),x(u(X),{key:0,class:"h-5 w-5 text-brand-100 dark:text-neutral-400"})):(l(),x(u(Z),{key:1,class:"h-5 w-5 text-brand-100 dark:text-neutral-400"}))])]),_:1}),a("div",se,[_(p(u(F),{ref_key:"menuItems",ref:V,static:"",class:"max-h-72 text-left w-full bg-white dark:bg-dark-001 rounded-lg shadow-lg border border-brand-200 dark:border-neutral-600 flex flex-col overflow-y-auto divide-y-2 divide-brand-100 dark:divide-neutral-600"},{default:g(()=>[(l(!0),b(z,null,O(m.value,o=>(l(),x(u(P),{as:"div",key:o.id,onMousedown:A(c=>k(o.name),["prevent"]),class:j([r.value==o.name?"bg-brand-600 dark:bg-brand-800 text-white":"hover:bg-brand-100 dark:hover:bg-dark-003","flex justify-between items-center px-4 py-2 w-full cursor-pointer"])},{default:g(()=>[a("div",ae,[o.image_url?(l(),b("img",{key:0,src:o.image_url,class:"h-4 w-4"},null,8,oe)):C("",!0),a("div",le,M(`${o.name}`),1)]),r.value==o.name?(l(),x(u(E),{key:0,class:"h-5 w-5 text-brand-200"})):C("",!0)]),_:2},1032,["onMousedown","class"]))),128))]),_:1},512),[[q,n.value]])])]),_:1}),t.errors?(l(),b("label",re,M(t.errors),1)):C("",!0)]))}}),ne={class:"flex flex-col gap-3"},de={class:"flex flex-col"},ue={class:"flex flex-col"},ie={class:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 mt-4"},ge=R({__name:"SecondStep",props:$({positions:{},departments:{},statuses:{}},{department:{},departmentModifiers:{},position:{},positionModifiers:{},status:{},statusModifiers:{},step:{},stepModifiers:{}}),emits:$(["back"],["update:department","update:position","update:status","update:step"]),setup(t,{emit:h}){const i=y(t,"department"),r=y(t,"position"),n=y(t,"status"),V=y(t,"step"),w=h,m=f(null),k=f(!1);async function d(){k.value=!0;try{const{data:c}=await K.post("/api/arta-id-verify",{step:2,position:r.value,department:i.value,status_id:n.value?.id});c&&(V.value=3)}catch(c){m.value=c.response.data.errors}k.value=!1}f([]);const s=f([]);function o(c){s.value=t.positions.filter(e=>e.name.toLowerCase().includes(c.query.toLowerCase())).map(e=>e.name)}return(c,e)=>(l(),b("div",null,[p(Q,{title:"Request ARTA ID",description:"Online Request ARTA ID",icon:u(J)},{default:g(()=>[e[7]||(e[7]=a("div",{class:"flex"},[a("label",{class:"my-2"},"For your additional ARTA ID information.")],-1)),a("form",{onSubmit:e[4]||(e[4]=A(v=>d(),["prevent"]))},[a("div",ne,[a("div",de,[(l(),x(B,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=v=>i.value=v),name:"Office/College/Unit",ref_name:"departmentRef",suggestions:t.departments,errors:m.value?.department,key:1},null,8,["modelValue","suggestions","errors"]))]),a("div",ue,[(l(),x(B,{ref_name:"positionRef",onSearch:o,modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=v=>r.value=v),name:"Position",suggestions:t.positions,errors:m.value?.position,key:2},null,8,["modelValue","suggestions","errors"]))]),p(H,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=v=>n.value=v),data:t.statuses,name:"Employment Status",errors:m.value?.status_id},null,8,["modelValue","data","errors"])]),a("div",ie,[p(L,{icon:u(G),type:"button",onClick:e[3]||(e[3]=v=>w("back"))},{default:g(()=>[...e[5]||(e[5]=[S("Back",-1)])]),_:1},8,["icon"]),p(L,{color:"brand",icon:u(W),forceLoading:k.value},{default:g(()=>[...e[6]||(e[6]=[S("Next",-1)])]),_:1},8,["icon","forceLoading"])])],32)]),_:1},8,["icon"])]))}});export{ge as _};
