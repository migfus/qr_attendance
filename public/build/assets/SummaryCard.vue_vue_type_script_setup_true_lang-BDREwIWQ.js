import{c as C,o as b,e as a,d as Q,k as D,W as x,r as v,a as E,a7 as I,b as n,w as u,v as r,u as o,an as S,aR as U,_ as c,J as l,aT as N,ad as T,f as V,af as A}from"./app-BOkKnMk8.js";import{_ as L}from"./PhotoPreviewModal.vue_vue_type_script_setup_true_lang-DRGzmNNf.js";import{Q as H,t as _}from"./qrcode.vue.esm-DhVb-LSs.js";import{r as y}from"./CheckIcon-C5b3kr33.js";import{r as $}from"./Square2StackIcon-Cc__3gcb.js";import{r as q}from"./ArrowDownOnSquareIcon-Cj4hYOxG.js";function M(t,w){return b(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}const W={class:"flex flex-col gap-2 items-center"},F={class:"flex flex-col gap-4 items-center bg-light-001 dark:bg-dark-002 rounded-t-xl rounded p-4 w-full"},J=["src"],O={class:"flex justify-end gap-2 mx-auto w-full"},G={class:"bg-light-001 dark:bg-dark-002 rounded p-4 w-full flex justify-between"},K={class:"font-semibold text-brand-800 dark:text-neutral-200"},X={class:"font-semibold text-brand-700 dark:text-neutral-300"},Y={class:"font-semibold text-brand-600 dark:text-neutral-300"},Z={class:"text-brand-600 dark:text-neutral-300 text-xs p-2 dark:bg-dark-001 rounded-xl font-semibold px-3"},ee={ref:"qr_code",class:"w-full h-auto object-fit mx-auto mb-2"},te={class:"flex justify-end gap-2"},ae={class:"flex flex-col rounded p-4 bg-light-001 dark:bg-dark-002 dark:text-neutral-200 w-full"},oe={class:"font-bold"},se=["src"],ne={class:"flex flex-col mr-auto rounded rounded-b-xl bg-light-001 dark:bg-dark-002 w-full p-4"},le={class:"text-brand-700 dark:text-neutral-300 font-semibold mr-auto"},ie={class:"text-brand-700 dark:text-neutral-300 font-semibold mr-auto"},we=Q({__name:"SummaryCard",props:{show_data:{}},setup(t){const w=D(),k=x("qrParentRef"),f=v(300),m=x("qr_code"),i=E({image:!1,qr:!1,qrid:!1}),h=v(!1),g=v(null);function R(d){const e=document.createElement("a");e.href=d,e.download=`${t.show_data.last_name}-${t.show_data.first_name}.jpg`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}async function z(){if(m.value){const d=await _(m.value,{cacheBust:!0}),e=document.createElement("a");e.download=`QR ${t.show_data.last_name} - ${t.show_data.first_name}.png`,e.href=d,e.click()}}async function B(){if(m.value){const d=await _(m.value,{cacheBust:!0}),s=await(await fetch(d)).blob(),j=new ClipboardItem({"image/png":s});await navigator.clipboard.write([j]),i.qr=!0}}function P(){h.value=!0,g.value=t.show_data.files[t.show_data.files.length-2]}I(()=>{p(),window.addEventListener("resize",p)});function p(){f.value=(k.value?.clientWidth??300)-35}return(d,e)=>(b(),C("div",null,[a("div",W,[a("div",F,[a("img",{src:t.show_data.files.length>0?t.show_data.files[t.show_data.files.length-2].thumbnail_url:"",class:"h-auto w-full mx-auto rounded-xl cursor-pointer border border-brand-200 dark:border-dark-003",onClick:e[0]||(e[0]=s=>P())},null,8,J),a("div",O,[n(c,{icon:o(U),class:"transition-all",href:d.route("dashboard.arta-id.edit",{arta_id:t.show_data.id}),disabled:!o(S)(["ARTA ID/Update/All"],o(w).props.auth?.permissions)},{default:u(()=>[...e[7]||(e[7]=[r(" Edit",-1)])]),_:1},8,["icon","href","disabled"]),n(c,{icon:i.image?o(y):o($),onClick:e[1]||(e[1]=s=>o(N)(t.show_data.files.length>0?t.show_data.files[0].file_url:"",()=>i.image=!0,()=>i.image=!1)),class:"transition-all"},{default:u(()=>[r(l(i.image?"Copied":"Copy"),1)]),_:1},8,["icon"]),n(c,{icon:o(q),color:"brand",onClick:e[2]||(e[2]=s=>R(t.show_data.files.length>0?t.show_data.files[0].file_url:""))},{default:u(()=>[...e[8]||(e[8]=[r(" Download ",-1)])]),_:1},8,["icon"])])]),a("div",G,[a("div",null,[a("p",K,l(o(T)(t.show_data,!1)),1),a("p",X,l(t.show_data.department.name),1),a("p",Y,l(t.show_data.position.name),1)]),a("div",null,[a("p",Z,l(t.show_data.employee_status.name),1)])]),a("div",{class:"flex flex-col bg-light-001 dark:bg-dark-002 rounded p-4 w-full gap-2 justify-center",ref_key:"qrParentRef",ref:k},[a("div",ee,[(b(),V(H,{value:`${o(w).props.base_url}/qr/${t.show_data.quick_response_codes[0].id}`,key:t.show_data.quick_response_codes[0].id,size:f.value,margin:2,"image-options":{hideBackgroundDots:!1,imageSize:.4,margin:10},"corners-square-options":{type:"square",color:"#000"},"dots-options":{type:"square",color:"#000"},qrOptions:{errorCorrectionLevel:"H"},level:"H","image-settings":{src:"/images/cmu.png",width:f.value/7,height:f.value/7,excavate:!0}},null,8,["value","size","image-settings"]))],512),a("div",te,[n(c,{icon:i.qr?o(y):o($),onClick:e[3]||(e[3]=s=>B()),class:"transition-all"},{default:u(()=>[r(l(i.qr?"Copied":"Copy QR"),1)]),_:1},8,["icon"]),n(c,{icon:o(q),color:"brand",onClick:e[4]||(e[4]=s=>z())},{default:u(()=>[...e[9]||(e[9]=[r("Download",-1)])]),_:1},8,["icon"])])],512),a("div",ae,[a("p",oe,l(t.show_data.claim_type.name),1),a("p",null,l(`${t.show_data.claim_type.price} pesos`),1),a("img",{src:t.show_data.claim_type.image_url},null,8,se)]),a("div",ne,[a("div",le,[n(o(M),{class:"size-4 inline mr-1"}),e[10]||(e[10]=r(" 22 Lanyard left ",-1))]),a("div",ie,[n(o(A),{class:"size-4 inline mr-1"}),e[11]||(e[11]=r(" 132 Printable Card left ",-1))])])]),n(L,{show:h.value,"onUpdate:show":e[5]||(e[5]=s=>h.value=s),photo:g.value,"onUpdate:photo":e[6]||(e[6]=s=>g.value=s),employee_id:t.show_data.id,no_navigation:"",no_details:""},null,8,["show","photo","employee_id"])]))}});export{we as _};
