import{d as x,k as c,a as b,r as _,c as $,o as U,b as o,e as d,w as m,y as k,_ as p,u as s,v as u,z as v,h as B,i as V}from"./app-BOkKnMk8.js";import{B as C}from"./BasicCard-ClXIXozC.js";import{_ as f}from"./AppInput.vue_vue_type_script_setup_true_lang-Bd-6u1aG.js";import{_ as y}from"./UploadAvatarModal.vue_vue_type_script_setup_true_lang-DNzfGbBX.js";import{_ as N}from"./Unedited.vue_vue_type_script_setup_true_lang-B_PPEncA.js";import{r as D}from"./index-D6rAUsPU.js";import{r as E}from"./CircleStackIcon-DUEEmQGZ.js";import{r as S}from"./ArrowLeftIcon-ad8tfL7s.js";import{r as j}from"./PencilIcon-CQul3KT8.js";const z={class:"flex flex-col gap-2 xl:grid grid-cols-3 dark:bg-dark-001"},T={class:"flex flex-col gap-2 col-start-2"},A=["src"],F={class:"flex flex-col sm:flex-row justify-end gap-2 mt-2"},O=x({__name:"(Create)",props:{roles:{},departments:{}},setup(l){const n=c();function g(){return{name:"",email:"",password:"",role:l.roles[0],department:l.departments[0],avatar_url:`${n.props.base_url}/images/cmu.png`}}const a=b(g()),i=_(!1);function w(){const t=new FormData,e=B(a.avatar_url,"image/jpg","avatar-image.jpg");t.append("name",a.name),t.append("email",a.email),t.append("password",a.password),t.append("role_id",a.role.id.toString()),t.append("department_id",a.department.id.toString()),t.append("avatar_file",e),V.post(route("dashboard.users.store"),t,{onSuccess:()=>{V.visit(route("dashboard.users.index"))},onError:r=>{console.error(r)},headers:{"Content-Type":"multipart/form-data"}})}return(t,e)=>(U(),$("div",z,[o(N,{class:"col-span-3"}),d("div",T,[o(C,{title:"New User",description:"Edit the information",icon:s(j),class:""},{default:m(()=>[d("form",{onSubmit:e[6]||(e[6]=k(r=>w(),["prevent"])),class:"flex flex-col gap-2"},[d("img",{src:a.avatar_url,class:"size-24 mx-auto rounded-full"},null,8,A),o(p,{onClick:e[0]||(e[0]=r=>i.value=!0),icon:s(D),type:"button",class:"w-full sm:w-auto sm:mx-auto"},{default:m(()=>[...e[9]||(e[9]=[u(" Upload Avatar ",-1)])]),_:1},8,["icon"]),o(f,{modelValue:a.name,"onUpdate:modelValue":e[1]||(e[1]=r=>a.name=r),name:"Name",error:s(n).props.errors.name},null,8,["modelValue","error"]),o(f,{modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=r=>a.email=r),name:"Email",type:"email",error:s(n).props.errors.email},null,8,["modelValue","error"]),o(f,{modelValue:a.password,"onUpdate:modelValue":e[3]||(e[3]=r=>a.password=r),name:"Password",error:s(n).props.errors.password},null,8,["modelValue","error"]),o(v,{name:"Department",data:l.departments,modelValue:a.department,"onUpdate:modelValue":e[4]||(e[4]=r=>a.department=r)},null,8,["data","modelValue"]),o(v,{name:"Department",data:l.roles,modelValue:a.role,"onUpdate:modelValue":e[5]||(e[5]=r=>a.role=r)},null,8,["data","modelValue"]),d("div",F,[o(p,{icon:s(E),color:"brand"},{default:m(()=>[...e[10]||(e[10]=[u("Create",-1)])]),_:1},8,["icon"]),o(p,{href:t.route("dashboard.users.index"),icon:s(S),type:"button"},{default:m(()=>[...e[11]||(e[11]=[u("Back",-1)])]),_:1},8,["href","icon"])])],32)]),_:1},8,["icon"]),o(y,{modelValue:a.avatar_url,"onUpdate:modelValue":e[7]||(e[7]=r=>a.avatar_url=r),show:i.value,"onUpdate:show":e[8]||(e[8]=r=>i.value=r),name:"Upload Avatar",ratio:1,size:[300,300]},null,8,["modelValue","show"])])]))}});export{O as default};
