import{j as y,A as j,x as k,d as N,aW as E,r as f,a as b,k as A,aR as B,aX as D,ad as M,i as l,c as T,o as I,b as o,u as n,aY as Q,w as _,e as v,y as z,_ as c,v as g,aZ as $}from"./app-BOkKnMk8.js";import{r as F,_ as L}from"./SearchCard.vue_vue_type_script_setup_true_lang-CK4Lr1Xv.js";import{_ as O}from"./PaginationCard.vue_vue_type_script_setup_true_lang-DBQF9yhf.js";import{_ as W}from"./ContentCard.vue_vue_type_script_setup_true_lang-DJMPTc7e.js";import{_ as X}from"./FormModal.vue_vue_type_script_setup_true_lang-BPnbyYLp.js";import{_ as Y}from"./AppTextArea.vue_vue_type_script_setup_true_lang-Bn83_HaO.js";import{_ as Z}from"./AppToggle.vue_vue_type_script_setup_true_lang-BJrnlHNF.js";import{r as G}from"./CheckCircleIcon-BGrwPwzL.js";import{r as H}from"./ArrowDownOnSquareIcon-Cj4hYOxG.js";import{r as q}from"./TrashIcon-CpbmzRkx.js";import{_ as J}from"./Unedited.vue_vue_type_script_setup_true_lang-B_PPEncA.js";import{r as K}from"./ArrowRightIcon-D_ciWIjH.js";import{r as ee}from"./PencilIcon-CQul3KT8.js";import{r as ae}from"./PaperAirplaneIcon-VjKR_m3E.js";import"./BasicCard-ClXIXozC.js";import"./AppInput.vue_vue_type_script_setup_true_lang-Bd-6u1aG.js";import"./AppCheckbox.vue_vue_type_script_setup_true_lang-DlampZ7V.js";import"./EllipsisVerticalIcon-ONelhbJp.js";import"./switch-BWfTFHiU.js";import"./label-ChvFSArM.js";const u=[{display_name:"All",value:"",icon:F},{display_name:"Unverified",value:"Unverified",icon:y},{display_name:"Processing",value:"Processing",icon:j},{display_name:"Completed",value:"Completed",icon:G},{display_name:"Claimed",value:"Claimed",icon:H},{display_name:"Rejected",value:"Rejected",icon:k},{display_name:"Removed",value:"Removed",icon:q}],te={class:"flex flex-col gap-4 dark:bg-dark-001 bg-brand-50"},se={class:"flex justify-end gap-2"},Ve=N({__name:"(Index)",props:{index_data:{},request_status_types:{}},setup(m){const x=E(),V=f(m.request_status_types.map(a=>({callback:(e,s)=>{P(a.id.toString(),a.name,e,s)},icon:y,label:`Set to ${a.name}`}))),r=b({search:route().queryParams.search?.toString()??"",start:route().queryParams.start?.toString()??"",end:route().queryParams.end?.toString()??"",search_filter:route().queryParams.search_filter?u.find(a=>a.value==route().queryParams.search_filter)??u[0]:u[0],start_select:!1,select_data:[]}),d=f(!1),t=b({id:"",status_type_id:"",status_type_name:"",message:"",email:"",send_to_email:!0}),i=A(),h=[{href:"/dashboard/arta-id/[%id%]",icon:K,label:"Details",callback:()=>{}},{href:"/dashboard/arta-id/[%id%]/edit",icon:B,label:"Edit",callback:()=>{}},{icon:q,label:"Delete",callback:(a,e)=>w(a)},...V.value],C=f(m.index_data.data.map(a=>({image_url:a.files.length>0?a.files[a.files.length-2].thumbnail_url:"",title:M(a),sub_title:`${a.latest_request_status?a.latest_request_status.request_status_type.name:"N/A"} - ${a.department.name}`,ago:D(a.created_at),sub_ago:a.email,id:a.id})));function p(a=1){l.get(x("dashboard.arta-id.index"),$(r,a))}function U(){window.open(route("dashboard.arta_id.prints",$(r)),"_blank")}function P(a,e,s,R){switch(t.id=s,t.email=R,t.status_type_id=a,t.status_type_name=e,t.send_to_email=!0,d.value=!0,e.toLowerCase()){case"unverified":t.message=i.props.auth?.user_settings.request_status_messages.Unverified??"";break;case"processing":t.message=i.props.auth?.user_settings.request_status_messages.Processing??"";break;case"completed":t.message=i.props.auth?.user_settings.request_status_messages.Completed??"";break;case"claimed":t.message=i.props.auth?.user_settings.request_status_messages.Claimed??"";break;case"rejected":t.message=i.props.auth?.user_settings.request_status_messages.Rejected??"";break;case"removed":t.message=i.props.auth?.user_settings.request_status_messages.Removed??"";break}}function S(){l.put(route("dashboard.arta-id.update",{arta_id:t.id}),{type:"request-status",request_status_type_id:t.status_type_id,content:t.message,notify_email:t.send_to_email}),d.value=!1}function w(a){r.select_data.length>0?l.delete(route("dashboard.arta-id.destroy",{arta_id:0}),{data:{ids:r.select_data}}):l.delete(route("dashboard.arta-id.destroy",{arta_id:a})),p(1)}return(a,e)=>(I(),T("div",te,[o(J),o(L,{modelValue:r,"onUpdate:modelValue":e[0]||(e[0]=s=>r=s),index_data_id:m.index_data.data.map(s=>s.id),search_filters:n(u),onSearch:p,onReset:e[1]||(e[1]=s=>Object.assign(r,n(Q)(n(u)[0]))),onCreate:e[2]||(e[2]=s=>n(l).visit(a.route("arta-id.index"))),onPrint:e[3]||(e[3]=s=>U())},null,8,["modelValue","index_data_id","search_filters"]),o(W,{links:h,index_data:C.value,title:"Employee",select_all:!1,start_select:r.start_select,modelValue:r.select_data,"onUpdate:modelValue":e[4]||(e[4]=s=>r.select_data=s)},null,8,["index_data","start_select","modelValue"]),o(O,{data:m.index_data,onChangePage:p},null,8,["data"]),o(X,{icon:n(y),title:`To be ${t.status_type_name.toUpperCase()}`,description:"Update request status",size:"w-xl",modelValue:d.value,"onUpdate:modelValue":e[9]||(e[9]=s=>d.value=s)},{default:_(()=>[v("form",{onSubmit:z(S,["prevent"])},[o(c,{onClick:e[5]||(e[5]=s=>d.value=!1),icon:n(ee),type:"button",href:a.route("dashboard.account-settings.show",{account_setting:4})},{default:_(()=>[...e[10]||(e[10]=[g(" Update Default Message ",-1)])]),_:1},8,["icon","href"]),o(Y,{name:"Message",modelValue:t.message,"onUpdate:modelValue":e[6]||(e[6]=s=>t.message=s)},null,8,["modelValue"]),o(Z,{name:` to ${t.email}`,modelValue:t.send_to_email,"onUpdate:modelValue":e[7]||(e[7]=s=>t.send_to_email=s)},null,8,["name","modelValue"]),v("div",se,[o(c,{onClick:e[8]||(e[8]=s=>d.value=!1),icon:n(k),type:"button"},{default:_(()=>[...e[11]||(e[11]=[g("Cancel",-1)])]),_:1},8,["icon"]),o(c,{color:"brand",icon:n(ae)},{default:_(()=>[...e[12]||(e[12]=[g("Update",-1)])]),_:1},8,["icon"])])],32)]),_:1},8,["icon","title","modelValue"])]))}});export{Ve as default};
