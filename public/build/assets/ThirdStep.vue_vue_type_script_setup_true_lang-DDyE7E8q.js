import{B as z}from"./BasicCard-ClXIXozC.js";import{d as I,p as B,q as f,W as q,f as G,o as V,w as l,b as o,u as s,Y as T,e,s as j,G as L,J as N,_ as x,v as w,x as H,S as P,r as E,c as F,C as O}from"./app-BOkKnMk8.js";import{R as J,r as A,S as U}from"./index-D6rAUsPU.js";import{r as W}from"./ArrowLeftIcon-ad8tfL7s.js";import{r as Y}from"./ArrowRightIcon-D_ciWIjH.js";const Q={class:"fixed inset-0 z-50 overflow-y-auto"},K={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},X={class:"bg-white dark:bg-dark-002 px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Z={class:"flex"},ee={class:"text-base font-semibold leading-6 text-gray-900 dark:text-neutral-200",id:"modal-title"},te={class:"flex flex-col items-center"},ae={class:"mt-3 text-center sm:mt-0 sm:text-left"},se={class:"mt-2 flex flex-col items-center"},oe={class:"mt-2"},le={class:"space-y-1 text-center"},ie={class:"flex text-sm text-gray-600"},re={for:"file-upload",class:"dark:text-neutral-200"},ne={class:"flex flex-col sm:flex-row justify-end gap-2 mt-4 sm:mt-0 mx-4 mb-4"},de=I({__name:"UploadARTAIDPicture",props:B({size:{},name:{},ratio:{}},{modelValue:{},modelModifiers:{},show:{type:Boolean},showModifiers:{},raw:{required:!0},rawModifiers:{}}),emits:B(["upload"],["update:modelValue","update:show","update:raw"]),setup(r,{emit:C}){const n=f(r,"modelValue"),m=f(r,"show"),c=r,M=C,g=q("uploadInput"),y={cropperOption:{viewMode:2,autoCropArea:1,dragMode:"crop",aspectRatio:c.ratio},cropperBoxStyle:{width:"100%",height:"100%",backgroundColor:"#f8f8f8",margin:"auto"}},b=f(r,"raw");function a(v){const{files:t}=v.target;if(!t||!t.length)return;const k=t[0],R=new FileReader;R.readAsDataURL(k),R.onload=()=>{const h=new Image;h.src=String(R.result),h.onload=()=>{const $=document.createElement("canvas"),S=$.getContext("2d");if(!S)return;const p=800;let{width:d,height:u}=h;d>u&&d>p?(u=u*p/d,d=p):u>d&&u>p&&(d=d*p/u,u=p),$.width=d,$.height=u,S.drawImage(h,0,0,d,u);const _=$.toDataURL("image/jpeg",1);n.value=_,b.value=_}}}async function i(){if(!U)return;const v=U.getDataURL({maxWidth:c.size[0],maxHeight:c.size[1],imageSmoothingQuality:"high"});n.value=v,M("upload",{cropped:v,raw:b})}function D(){g.value?.click()}return(v,t)=>(V(),G(s(P),{as:"template",show:m.value},{default:l(()=>[o(s(T),{as:"div",class:"relative z-40",onClose:t[3]||(t[3]=k=>m.value=!1)},{default:l(()=>[o(s(j),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[...t[4]||(t[4]=[e("div",{class:"fixed inset-0 bg-dark-003/50 backdrop-blur-md"},null,-1)])]),_:1}),e("div",Q,[e("div",K,[o(s(j),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:l(()=>[o(s(L),{class:"relative transform overflow-hidden rounded-xl bg-white dark:bg-dark-002 text-left shadow-xl transition-all sm:my-8 w-full sm:max-w-lg"},{default:l(()=>[e("div",X,[e("div",Z,[e("h3",ee,N(r.name),1)]),e("div",te,[e("div",ae,[e("div",se,[o(s(J),{boxStyle:y.cropperBoxStyle,img:n.value,options:y.cropperOption,class:"mx-auto"},null,8,["boxStyle","img","options"])])])]),e("div",oe,[e("div",{class:"mt-1 flex justify-center rounded-xl border-2 border-dashed border-gray-300 dark:hover:bg-dark-003 cursor-pointer px-6 pt-5 pb-6 group",onClick:t[0]||(t[0]=k=>D())},[e("div",le,[t[7]||(t[7]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-neutral-200",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",ie,[e("label",re,[t[5]||(t[5]=e("span",null,"Upload a file",-1)),e("input",{onChange:a,ref:"uploadInput",id:"file-upload",name:"file-upload",type:"file",accept:"image/jpg, image/jpeg, image/png, image/gif, image/heic",class:"sr-only",style:{"pointer-events":"none"}},null,544)]),t[6]||(t[6]=e("p",{class:"pl-1 dark:text-neutral-300"},"or drag and drop",-1))]),t[8]||(t[8]=e("p",{class:"text-xs text-gray-500 dark:text-neutral-300"},"PNG, JPG, GIF, HEIC up to 10MB",-1))])])])]),e("div",ne,[o(x,{icon:s(A),block:"",color:"brand",onClick:t[1]||(t[1]=()=>{i(),m.value=!1}),class:"mt-1"},{default:l(()=>[...t[9]||(t[9]=[w(" Save ",-1)])]),_:1},8,["icon"]),o(x,{icon:s(H),onClick:t[2]||(t[2]=k=>m.value=!1),class:"mt-1"},{default:l(()=>[...t[10]||(t[10]=[w("Cancel",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),ue={class:"flex flex-col mb-4"},me=["src"],pe={class:"flex flex-col gap-3 mb-4"},fe={class:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 mt-4"},ye=I({__name:"ThirdStep",props:{image:{required:!0},imageModifiers:{},raw_image:{required:!0},raw_imageModifiers:{},step:{},stepModifiers:{}},emits:B(["back","confirm"],["update:image","update:raw_image","update:step"]),setup(r,{emit:C}){const n=f(r,"image"),m=f(r,"raw_image"),c=f(r,"step"),M=C,g=E(!1);function y(){c.value=4}return(b,a)=>(V(),F("div",null,[o(z,{title:"Request ARTA ID",description:"Online Request ARTA ID",icon:s(O)},{default:l(()=>[e("div",ue,[a[6]||(a[6]=e("label",{class:"my-2"},"Please upload your picture based on guidelines.",-1)),a[7]||(a[7]=e("ul",{class:"ml-4"},[e("li",null,"Must be in formal attire."),e("li",null,"Must be taken in half body."),e("li",null,"Recommended in a white background")],-1)),e("img",{src:n.value?n.value:`${b.$page.props.base_url}/images/formal-attire-sample.jpg`,class:"object-cover my-2"},null,8,me)]),e("div",null,[e("div",pe,[o(x,{color:"brand",icon:s(A),onClick:a[0]||(a[0]=i=>g.value=!0)},{default:l(()=>[...a[8]||(a[8]=[w("Upload",-1)])]),_:1},8,["icon"])]),e("div",fe,[o(x,{icon:s(W),type:"button",onClick:a[1]||(a[1]=i=>M("back"))},{default:l(()=>[...a[9]||(a[9]=[w("Back",-1)])]),_:1},8,["icon"]),o(x,{color:"brand",icon:s(Y),onClick:a[2]||(a[2]=i=>y()),disabled:!n.value},{default:l(()=>[...a[10]||(a[10]=[w("Next",-1)])]),_:1},8,["icon","disabled"])])])]),_:1},8,["icon"]),o(de,{size:[800,800],name:"Crop the picture",ratio:1,modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=i=>n.value=i),raw:m.value,"onUpdate:raw":a[4]||(a[4]=i=>m.value=i),show:g.value,"onUpdate:show":a[5]||(a[5]=i=>g.value=i)},null,8,["modelValue","raw","show"])]))}});export{ye as _};
