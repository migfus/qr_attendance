import{d as U,a as w,r as $,c as C,o as k,b as l,w as d,e as n,_ as m,u as t,an as p,v as i,y as x,z as v,h as y,i as g,ao as B}from"./app-BOkKnMk8.js";import{B as A}from"./BasicCard-ClXIXozC.js";import{_ as f}from"./AppInput.vue_vue_type_script_setup_true_lang-Bd-6u1aG.js";import{_ as N}from"./UploadAvatarModal.vue_vue_type_script_setup_true_lang-DNzfGbBX.js";import{r as D}from"./TrashIcon-CpbmzRkx.js";import{r as E}from"./CircleStackIcon-DUEEmQGZ.js";import{r as S}from"./ArrowLeftIcon-ad8tfL7s.js";import{r as T}from"./UserIcon-BMyn73B1.js";const j={class:"flex flex-col gap-2"},z={class:"flex flex-col gap-2 items-center"},P=["src"],F={class:"flex flex-col gap-2 mt-4 sm:flex-row justify-end"},L=U({__name:"FormCard",props:{user:{},departments:{},roles:{}},setup(s){const r=w({name:s.user.name,email:s.user.email,password:"",department:s.departments.find(a=>a.id===s.user.department.id),role:s.roles.find(a=>a.id===s.user.roles[0].id),avatar_url:s.user.avatar_url}),u=$(!1);function V(){const a=new FormData,e=y(r.avatar_url,"image/jpg","avatar-image.jpg");a.append("name",r.name),a.append("email",r.email),a.append("password",r.password),a.append("department_id",r.department.id.toString()),a.append("role_id",r.role.id.toString()),a.append("avatar_file",e),a.append("_method","PUT"),g.post(route("dashboard.users.update",{user:s.user.id}),a,{headers:{"Content-Type":"multipart/form-data"},...B()})}function b(){g.delete(route("dashboard.users.destroy",{user:s.user.id}))}return(a,e)=>(k(),C("div",null,[l(A,{title:"Edit User",description:"Edit user's data",icon:t(T)},{default:d(()=>[n("div",j,[n("div",z,[n("img",{src:r.avatar_url,alt:"User Avatar",class:"size-36 rounded-full"},null,8,P),l(m,{onClick:e[0]||(e[0]=o=>u.value=!0),disabled:!t(p)(["Users/Update/All"],a.$page.props.auth?.permissions),class:"w-full sm:w-auto"},{default:d(()=>[...e[10]||(e[10]=[i(" Change Avatar ",-1)])]),_:1},8,["disabled"])]),n("form",{onSubmit:e[7]||(e[7]=x(o=>V(),["prevent"])),class:"flex flex-col gap-2"},[l(f,{name:"Name",modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=o=>r.name=o),error:a.$page.props.errors.name},null,8,["modelValue","error"]),l(f,{name:"Email",type:"email",modelValue:r.email,"onUpdate:modelValue":e[2]||(e[2]=o=>r.email=o),error:a.$page.props.errors.name},null,8,["modelValue","error"]),l(f,{name:"Password (blank no change)",placeholder:"No Change",modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=o=>r.password=o),error:a.$page.props.errors.password},null,8,["modelValue","error"]),l(v,{name:"Department",modelValue:r.department,"onUpdate:modelValue":e[4]||(e[4]=o=>r.department=o),data:s.departments},null,8,["modelValue","data"]),l(v,{name:"Role",modelValue:r.role,"onUpdate:modelValue":e[5]||(e[5]=o=>r.role=o),data:s.roles},null,8,["modelValue","data"]),n("div",F,[l(m,{color:"danger",icon:t(D),type:"button",onClick:e[6]||(e[6]=o=>b()),disabled:!t(p)(["Users/Delete/All"],a.$page.props.auth?.permissions)},{default:d(()=>[...e[11]||(e[11]=[i(" Delete User ",-1)])]),_:1},8,["icon","disabled"]),l(m,{color:"brand",icon:t(E),disabled:!t(p)(["Users/Update/All"],a.$page.props.auth?.permissions)},{default:d(()=>[...e[12]||(e[12]=[i(" Update ",-1)])]),_:1},8,["icon","disabled"]),l(m,{icon:t(S),href:a.route("dashboard.users.index"),type:"button"},{default:d(()=>[...e[13]||(e[13]=[i(" Back ",-1)])]),_:1},8,["icon","href"])])],32)])]),_:1},8,["icon"]),l(N,{modelValue:r.avatar_url,"onUpdate:modelValue":e[8]||(e[8]=o=>r.avatar_url=o),show:u.value,"onUpdate:show":e[9]||(e[9]=o=>u.value=o),name:"Change Avatar",ratio:1,size:[300,300]},null,8,["modelValue","show"])]))}});export{L as _};
