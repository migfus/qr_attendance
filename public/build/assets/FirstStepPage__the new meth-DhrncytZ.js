import{d as v,a as y,A as c,x as $,I as h,f as C,o as V,w as a,b as s,u as l,e as o,y as S,_ as d,v as u,J as k,i as x}from"./app-BOkKnMk8.js";import{B}from"./BasicCard-ClXIXozC.js";import{_ as N}from"./AppInput.vue_vue_type_script_setup_true_lang-Bd-6u1aG.js";import{_ as T}from"./SetupLayout.vue_vue_type_script_setup_true_lang-qvc8x6EN.js";import{r as F}from"./CheckCircleIcon-BGrwPwzL.js";import{r as P}from"./CircleStackIcon-DUEEmQGZ.js";import{r as j}from"./InformationCircleIcon-D7KJqvJ4.js";import{r as O}from"./ArrowRightIcon-D_ciWIjH.js";import"./ProgressSection.vue_vue_type_script_setup_true_lang-CZLQsvnt.js";const q={class:"text-yellow-100 font-semibold text-sm flex align-middles gap-2 bg-yellow-800 p-4 rounded-xl"},z={class:"flex flex-col lg:flex-row-reverse gap-2"},D={class:"flex flex-col lg:flex-row-reverse gap-2"},H=v({__name:"FirstStepPage__the new meth",props:{errors:{},flash:{}},emits:["next","back"],setup(m,{emit:E}){const r=y(_()),f=[{name:"Test Connection",icon:c},{name:"Verifying...",icon:c},{name:"Connection Successful. Check again?",icon:F,color:"brand"},{name:"Connection Failed. Try again.",icon:$,color:"danger"}],n=y(f[0]);h(()=>m.flash,()=>{m.flash.error?p(3):p(2)});function p(t){Object.assign(n,f[t]),setTimeout(()=>{Object.assign(n,f[0])},2e3)}function _(){return{app_name:"Website Name",app_url:"http://127.0.0.1:8080",mail_mailer:{name:"SMTP",id:"smtp"},mail_host:"smtp.hostinger.com",mail_port:"587",mail_username:"no-reply@example.com",mail_encryption:"tls",mail_password:"",mail_from_address:"noreply@example.com",host:"localhost",port:"3306",database:"db_name",username:"root",password:""}}async function g(){p(1);try{const t=await x.post(route("setup.store"),{req_type:"verify_database",...r})}catch(t){console.error(t)}}async function b(){try{const t=await x.post(route("setup.store"),{req_type:"store_env_file",...r,mail_mailer:r.mail_mailer.id})}catch(t){console.error(t)}}function w(){Object.assign(r,_())}return(t,e)=>(V(),C(T,{current_step:1},{default:a(()=>[s(B,{title:"Setup .ENV",class:"lg:col-start-2",icon:l(P)},{default:a(()=>[o("form",{onSubmit:e[3]||(e[3]=S(i=>b(),["prevent"])),class:"flex flex-col gap-4"},[o("p",q,[e[4]||(e[4]=o("span",{class:"material-symbols-rounded",style:{fontSize:"18px"}},"info",-1)),s(l(j),{class:"size-5 text-yellow-200"}),e[5]||(e[5]=o("ul",null,[o("li",null," Please setup the .env file before proceeding to the next step. "),o("li",null," You can find the .env file on the root (/) folder. ")],-1))]),s(N,{modelValue:r.password,"onUpdate:modelValue":e[0]||(e[0]=i=>r.password=i),name:"Password",type:"password",error:m.errors.password},null,8,["modelValue","error"]),o("div",z,[s(d,{icon:n.icon,type:"button",onClick:e[1]||(e[1]=i=>g()),color:n.color},{default:a(()=>[u(k(n.name),1)]),_:1},8,["icon","color"])]),o("div",D,[s(d,{icon:l(O)},{default:a(()=>[...e[6]||(e[6]=[u("Next",-1)])]),_:1},8,["icon"]),s(d,{icon:l(c),onClick:e[2]||(e[2]=i=>w()),type:"button"},{default:a(()=>[...e[7]||(e[7]=[u("Reset",-1)])]),_:1},8,["icon"])])],32)]),_:1},8,["icon"])]),_:1}))}});export{H as default};
