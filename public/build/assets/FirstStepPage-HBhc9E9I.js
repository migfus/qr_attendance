import{d as P,a as b,A as g,x as S,I as C,f as M,o as k,w as m,b as a,u as i,e as n,y as T,_ as p,v as d,J as B,i as x}from"./app-BOkKnMk8.js";import{B as E}from"./BasicCard-ClXIXozC.js";import{_ as t}from"./AppInput.vue_vue_type_script_setup_true_lang-Bd-6u1aG.js";import{_ as N}from"./SetupLayout.vue_vue_type_script_setup_true_lang-qvc8x6EN.js";import{_ as D}from"./AppSelect.vue_vue_type_script_setup_true_lang-Q3e0NIGn.js";import{r as F}from"./CheckCircleIcon-BGrwPwzL.js";import{r as j}from"./CircleStackIcon-DUEEmQGZ.js";import{r as q}from"./PaperAirplaneIcon-VjKR_m3E.js";import{r as w}from"./InformationCircleIcon-D7KJqvJ4.js";import{r as A}from"./ArrowRightIcon-D_ciWIjH.js";import"./ProgressSection.vue_vue_type_script_setup_true_lang-CZLQsvnt.js";const O={class:"flex flex-col lg:flex-row-reverse gap-2"},z={class:"flex flex-col lg:flex-row-reverse gap-2"},H={class:"text-brand-200 font-semibold text-sm flex align-middles gap-2"},I={class:"text-brand-200 font-semibold text-sm flex align-middles gap-2"},R={class:"flex flex-col lg:flex-row-reverse gap-2"},oe=P({__name:"FirstStepPage",props:{errors:{},flash:{}},emits:["next","back"],setup(l,{emit:J}){const r=b(y()),f=[{name:"Test Connection",icon:g},{name:"Verifying...",icon:g},{name:"Connection Successful. Check again?",icon:F,color:"brand"},{name:"Connection Failed. Try again.",icon:S,color:"danger"}],u=b(f[0]),v=[{name:"SMTP",id:"smtp"},{name:"Sendmail",id:"sendmail"},{name:"Mailgun",id:"mailgun"},{name:"SES",id:"ses"},{name:"Postmark",id:"postmark"}];C(()=>l.flash,()=>{l.flash.error?V(3):V(2)});function V(s){Object.assign(u,f[s]),setTimeout(()=>{Object.assign(u,f[0])},2e3)}function y(){return{app_name:"[Test]",app_url:"https://test.cmuohrms.site",mail_mailer:{name:"SMTP",id:"smtp"},mail_host:"smtp.hostinger.com",mail_port:"587",mail_username:"no-reply@example.com",mail_encryption:"tls",mail_password:"",mail_from_address:"noreply@example.com",host:"localhost",port:"3306",database:"u218070332_test",username:"u218070332_test",password:"a#pEIxPDP6"}}async function c(){V(1);try{const s=await x.post(route("setup.store"),{req_type:"verify_database",...r})}catch(s){console.error(s)}}async function _(){try{const s=await x.post(route("setup.store"),{req_type:"store_env_file",...r,mail_mailer:r.mail_mailer.id})}catch(s){console.error(s)}}async function U(){try{const s=await x.post(route("setup.store"),{req_type:"test_email",...r,mail_mailer:r.mail_mailer.id})}catch(s){console.error(s)}}function $(){Object.assign(r,y())}return(s,e)=>(k(),M(N,{current_step:1},{default:m(()=>[a(E,{title:"Setup .ENV",class:"lg:col-start-2",icon:i(j)},{default:m(()=>[n("form",{onSubmit:e[16]||(e[16]=T(o=>_(),["prevent"])),class:"flex flex-col gap-4"},[a(t,{modelValue:r.app_name,"onUpdate:modelValue":e[0]||(e[0]=o=>r.app_name=o),name:"Website Name",error:l.errors.app_name},null,8,["modelValue","error"]),a(t,{modelValue:r.app_url,"onUpdate:modelValue":e[1]||(e[1]=o=>r.app_url=o),name:"App URL",error:l.errors.app_url,class:"mb-4"},null,8,["modelValue","error"]),a(D,{modelValue:r.mail_mailer,"onUpdate:modelValue":e[2]||(e[2]=o=>r.mail_mailer=o),suggestions:v,name:"Mail Protocol",error:l.errors.mail_mailer,color:""},null,8,["modelValue","error"]),a(t,{modelValue:r.mail_host,"onUpdate:modelValue":e[3]||(e[3]=o=>r.mail_host=o),name:"Mail Host",error:l.errors.mail_host},null,8,["modelValue","error"]),a(t,{modelValue:r.mail_port,"onUpdate:modelValue":e[4]||(e[4]=o=>r.mail_port=o),name:"Mail Port",error:l.errors.mail_port},null,8,["modelValue","error"]),a(t,{modelValue:r.mail_username,"onUpdate:modelValue":e[5]||(e[5]=o=>r.mail_username=o),name:"Mail Username",error:l.errors.mail_username},null,8,["modelValue","error"]),a(t,{modelValue:r.mail_password,"onUpdate:modelValue":e[6]||(e[6]=o=>r.mail_password=o),name:"Mail Password",type:"password",error:l.errors.mail_password},null,8,["modelValue","error"]),a(t,{modelValue:r.mail_from_address,"onUpdate:modelValue":e[7]||(e[7]=o=>r.mail_from_address=o),name:"Mail From Address",error:l.errors.mail_from_address,class:"mb-4"},null,8,["modelValue","error"]),n("div",O,[a(p,{icon:i(q),type:"button",onClick:e[8]||(e[8]=o=>U())},{default:m(()=>[...e[17]||(e[17]=[d(" Test Email ",-1)])]),_:1},8,["icon"])]),a(t,{modelValue:r.host,"onUpdate:modelValue":e[9]||(e[9]=o=>r.host=o),name:"Host",error:l.errors.host},null,8,["modelValue","error"]),a(t,{modelValue:r.port,"onUpdate:modelValue":e[10]||(e[10]=o=>r.port=o),name:"Port",error:l.errors.port},null,8,["modelValue","error"]),a(t,{modelValue:r.database,"onUpdate:modelValue":e[11]||(e[11]=o=>r.database=o),name:"Database",error:l.errors.database},null,8,["modelValue","error"]),a(t,{modelValue:r.username,"onUpdate:modelValue":e[12]||(e[12]=o=>r.username=o),name:"Username",error:l.errors.username},null,8,["modelValue","error"]),a(t,{modelValue:r.password,"onUpdate:modelValue":e[13]||(e[13]=o=>r.password=o),name:"Password",type:"password",error:l.errors.password},null,8,["modelValue","error"]),n("div",z,[a(p,{icon:u.icon,type:"button",onClick:e[14]||(e[14]=o=>c()),color:u.color},{default:m(()=>[d(B(u.name),1)]),_:1},8,["icon","color"])]),n("div",null,[n("p",H,[a(i(w),{class:"size-5"}),e[18]||(e[18]=d(" You can modify the .env after setup. ",-1))]),n("p",I,[a(i(w),{class:"size-5"}),e[19]||(e[19]=d(' Do not run on "php artisan serve", it will not run migration. ',-1))])]),n("div",R,[a(p,{icon:i(A)},{default:m(()=>[...e[20]||(e[20]=[d("Next",-1)])]),_:1},8,["icon"]),a(p,{icon:i(g),onClick:e[15]||(e[15]=o=>$()),type:"button"},{default:m(()=>[...e[21]||(e[21]=[d("Reset",-1)])]),_:1},8,["icon"])])],32)]),_:1},8,["icon"])]),_:1}))}});export{oe as default};
