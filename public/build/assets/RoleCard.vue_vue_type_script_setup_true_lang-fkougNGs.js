import{c as o,o as l,e as r,d as V,r as y,a as z,b as t,u as i,J as f,Q as v,R as g,w as a,g as b,ae as R,_ as c,f as $,x as w,v as k,B as N,i as C,ao as T}from"./app-BOkKnMk8.js";import{_ as H}from"./UsersCardContent.vue_vue_type_script_setup_true_lang-CVsJK8Sx.js";import{_ as P}from"./PermissionSelect.vue_vue_type_script_setup_true_lang-DuRtq-Cf.js";import{_ as E}from"./FormModal.vue_vue_type_script_setup_true_lang-BPnbyYLp.js";import{r as F}from"./WrenchIcon-sxk0xklf.js";import{r as L}from"./PencilIcon-CQul3KT8.js";import{r as M}from"./ArrowRightIcon-D_ciWIjH.js";import{r as O}from"./UserIcon-BMyn73B1.js";function S(n,d){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}const A={class:"flex flex-col gap-2 bg-white dark:bg-dark-002 p-4 rounded-xl"},D={class:"flex justify-between"},J={class:"flex flex-col items-start"},Q={class:"flex gap-2 items-center"},Y={class:"font-medium text-medium text-neutral-700 dark:text-neutral-200"},Z={class:"flex gap-2"},q={class:"flex -space-x-1 overflow-hidden p-0.5"},G=["src","alt"],I={class:"flex gap-2 items-start"},K={key:0,class:"bg-neutral-200 px-2 py-0.5 rounded-xl text-brand-700 text-xs"},W={key:0,class:"cursor-pointer bg-neutral-200 px-2 py-0.5 rounded-xl text-brand-700 text-xs"},X={key:1,class:"flex flex-col dark:bg-dark-001 p-4 rounded-xl"},ee={class:"grid lg:grid-cols-3 xl:grid-cols-4 gap-4"},se={class:"flex flex-col gap-2 p-4 bg-brand-50 dark:bg-dark-002 rounded-xl"},re={class:"flex font-semibold dark:text-light-001"},ne={class:"flex flex-col gap-4 dark:text-light-002"},le={class:"flex flex-col sm:flex-row justify-end mt-4"},oe={class:"flex flex-col gap-4"},te={class:"flex gap-2 items-center"},ie=["src"],ae={class:"font-semibold"},de={class:"flex flex-col gap-4 bg-brand-50 dark:bg-dark-001 p-4 rounded-xl"},ue={class:"flex justify-between"},me={class:"font-semibold"},fe={class:"flex flex-col sm:flex-row justify-end"},he=V({__name:"RoleCard",props:{role:{},roles:{},permission_modules:{},permission_types:{}},setup(n){const d=y(route().params.search_filter=="Users"?"users":route().params.search_filteer=="Permissions"?"permissions":""),p=z(h()),x=y(!1);function h(){return{id:"",name:"",avatar_url:""}}function j(u,e,s){Object.assign(p,{id:u,name:e,avatar_url:s}),x.value=!0}function B(u,e,s){C.put(route("dashboard.roles-permissions.update",{roles_permission:s}),{type:"updateRole",from_permission_id:u,to_permission_id:e},T())}function U(u){C.put(route("dashboard.roles-permissions.update",{roles_permission:p.id}),{type:"transferUser",role_id:u},{onFinish:()=>{Object.assign(p,h()),x.value=!1},...T()})}return(u,e)=>(l(),o("div",A,[r("div",D,[r("div",J,[r("div",Q,[t(i(F),{class:"size-4 inline"}),r("label",Y,f(n.role.display_name),1)]),r("div",Z,[r("div",q,[(l(!0),o(v,null,g(n.role.users,s=>(l(),o("img",{key:s.id,src:s.avatar_url,alt:s.name,class:"inline-block size-4 rounded-full ring-2 dark:ring-neutral-500 ring-neutral-300"},null,8,G))),128))])])]),r("div",I,[t(c,{icon:i(R),onClick:e[0]||(e[0]=s=>d.value="users")},{default:a(()=>[e[6]||(e[6]=r("label",{class:"hidden sm:inline"}," Users ",-1)),n.role.users.length>0?(l(),o("span",K,f(n.role.users.length),1)):b("",!0)]),_:1},8,["icon"]),t(c,{icon:i(S),color:"brand",onClick:e[1]||(e[1]=s=>d.value="permissions")},{default:a(()=>[e[7]||(e[7]=r("label",{class:"hidden sm:inline cursor-pointer"}," Permissions ",-1)),n.role.permissions.length>0?(l(),o("span",W,f(n.role.permissions.length),1)):b("",!0)]),_:1},8,["icon"]),t(c,{icon:i(L),href:u.route("dashboard.roles-permissions.edit",{roles_permission:n.role.id})},{default:a(()=>[...e[8]||(e[8]=[r("label",{class:"hidden sm:inline"}," Edit ",-1)])]),_:1},8,["icon","href"])])]),t(N,null,{default:a(()=>[d.value=="users"?(l(),$(H,{key:0,users:n.role.users,onClose:e[2]||(e[2]=s=>d.value=""),onTransfer:j},null,8,["users"])):d.value=="permissions"?(l(),o("div",X,[e[10]||(e[10]=r("h4",{class:"font-semibold mb-4 dark:text-light-001"},"Permissions",-1)),r("div",ee,[(l(!0),o(v,null,g(n.permission_modules,s=>(l(),o("div",se,[r("div",re,f(s.name),1),(l(!0),o(v,null,g(n.permission_types,_=>(l(),o("div",ne,[s.permissions.filter(m=>m.permission_type.name==_.name).length>0?(l(),$(P,{key:0,title:_.name,permissions:s.permissions.filter(m=>m.permission_type.name==_.name),selected_permissions:n.role.permissions.filter(m=>m.permission_module.name==s.name).filter(m=>m.permission_type.name==_.name),role_id:n.role.id,onUpdate:B},null,8,["title","permissions","selected_permissions","role_id"])):b("",!0)]))),256))]))),256))]),r("div",le,[t(c,{onClick:e[3]||(e[3]=s=>d.value=""),icon:i(w)},{default:a(()=>[...e[9]||(e[9]=[k("Close ",-1)])]),_:1},8,["icon"])])])):b("",!0)]),_:1}),t(E,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=s=>x.value=s),title:"Transfer To",icon:i(O),size:"lg",description:"You will transfer the user's role."},{default:a(()=>[r("div",oe,[r("div",te,[r("img",{src:p.avatar_url,class:"size-4 inline rounded-full"},null,8,ie),r("label",ae,f(p.name),1)]),r("div",de,[(l(!0),o(v,null,g(n.roles.filter(s=>s.id!=n.role.id),s=>(l(),o("div",ue,[r("div",me,f(s.display_name),1),t(c,{icon:i(M),size:"sm",color:"brand",onClick:_=>U(s.id)},{default:a(()=>[...e[11]||(e[11]=[k("Transfer",-1)])]),_:1},8,["icon","onClick"])]))),256))]),r("div",fe,[t(c,{icon:i(w),onClick:e[4]||(e[4]=s=>x.value=!1)},{default:a(()=>[...e[12]||(e[12]=[k("Cancel",-1)])]),_:1},8,["icon"])])])]),_:1},8,["modelValue","icon"])]))}});export{he as _,S as r};
