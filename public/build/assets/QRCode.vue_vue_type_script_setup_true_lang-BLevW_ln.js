import{d as B,k as q,W as C,a as R,r as z,a7 as Q,c as i,o as s,e as r,g as c,J as m,b as u,n as L,f as V,_ as d,u as l}from"./app-BOkKnMk8.js";import{Q as j,t as y}from"./qrcode.vue.esm-DhVb-LSs.js";import{r as E}from"./CheckIcon-C5b3kr33.js";import{r as N}from"./Square2StackIcon-Cc__3gcb.js";import{r as S}from"./ArrowDownOnSquareIcon-Cj4hYOxG.js";import{r as I}from"./TrashIcon-CpbmzRkx.js";const P={class:"relative group w-full"},U={class:"text-center text-sm pt-1 -mb-1 dark:text-neutral-800 font-bold"},W={class:"flex justify-center"},D={key:0,class:"flex justify-start text-black font-medium line-clamp-1 max-w-[250px] text-wrap text-center mx-auto"},H={key:1,class:"flex justify-center text-gray-700 dark:font-normal text-wrap text-center max-w-[250px] mx-auto"},J={class:"absolute group-hover:opacity-100 opacity-0 flex gap-2 transition-all bottom-2 right-2"},K=B({__name:"QRCode",props:{id:{},employee_name:{},selected_office:{},status:{},noLabel:{type:Boolean},noImage:{type:Boolean},noRemove:{type:Boolean}},emits:["remove"],setup(t,{emit:b}){const f=t,w=b,p=q(),a=C("qr_to_png"),v=R({qr:!1}),g=z(200);`${p.props.base_url}`;function _(o){return`${p.props.base_url}/l/${o}`}async function k(){if(a.value){const o=await y(a.value,{cacheBust:!0}),e=document.createElement("a");e.download=`QR ${f.employee_name} - ${f.selected_office.name}.png`,e.href=o,e.click()}}async function h(){if(a.value){const o=await y(a.value,{cacheBust:!0}),n=await(await fetch(o)).blob(),$=new ClipboardItem({"image/png":n});await navigator.clipboard.write([$]),v.qr=!0}}function x(){g.value=a.value?.clientWidth??200}return Q(()=>{x(),window.addEventListener("resize",x)}),(o,e)=>(s(),i("div",P,[r("div",{ref_key:"qr_to_png",ref:a,class:L(["flex flex-col bg-white rounded-md truncate",t.noLabel?"h-min-[270px]":"h-auto"])},[r("span",U,m(t.id),1),r("div",W,[u(j,{value:_(t.id),size:g.value+10,margin:2,level:"H",background:"#ffffff"},null,8,["value","size"])]),t.noLabel?c("",!0):(s(),i("div",D,m(t.employee_name),1)),t.noLabel?c("",!0):(s(),i("div",H,m(t.selected_office.name),1))],2),r("div",J,[u(d,{icon:v.qr?l(E):l(N),onClick:e[0]||(e[0]=n=>h()),class:"shadow-lg"},null,8,["icon"]),u(d,{color:"brand",icon:l(S),onClick:e[1]||(e[1]=n=>k()),class:"shadow-lg"},null,8,["icon"]),t.noRemove?c("",!0):(s(),V(d,{key:0,color:"danger",icon:l(I),onClick:e[2]||(e[2]=n=>w("remove")),class:"shadow-lg",iconOnly:""},null,8,["icon"]))])]))}});export{K as _};
