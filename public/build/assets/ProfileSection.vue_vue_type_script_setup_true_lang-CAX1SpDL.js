import{d as x,k as b,a as V,r as w,f as y,o as U,w as d,e as s,b as n,y as $,_ as p,u as t,an as m,v as u,h as A,i as f,ao as c}from"./app-BOkKnMk8.js";import{B}from"./BasicCard-ClXIXozC.js";import{_ as v}from"./AppInput.vue_vue_type_script_setup_true_lang-Bd-6u1aG.js";import{_ as C}from"./UploadAvatarModal.vue_vue_type_script_setup_true_lang-DNzfGbBX.js";import{r as P}from"./UserIcon-BMyn73B1.js";import{r as S}from"./CircleStackIcon-DUEEmQGZ.js";import{r as k}from"./PaintBrushIcon-KFjMLR7l.js";const h={class:"flex flex-col gap-2 col-start-2 lg:grid grid-cols-2"},j={class:"flex flex-col gap-2 items-center"},N=["src"],T={class:"flex flex-col gap-2 justify-end"},z={class:"flex flex-col sm:flex-row justify-end mt-4"},I=x({__name:"ProfileSection",setup(D){const r=b(),a=V({name:r.props.auth?.name??"",email:r.props.auth?.email??"",avatar:r.props.auth?.avatar_url??""}),i=w(!1);function g(){const l=new FormData,e=A(a.avatar,"image/jpg","avatar-image.jpg");l.append("type","upload-avatar"),l.append("avatar",e),l.append("route_id","1"),f.post(route("dashboard.account-settings.store"),l,{headers:{"Content-Type":"multipart/form-data"},...c([])})}function _(){f.post(route("dashboard.account-settings.store"),{type:"update-profile",email:a.email,name:a.name,route_id:1},c([]))}return(l,e)=>(U(),y(B,{title:"Profile",icon:t(k),description:"Set your profile."},{default:d(()=>[s("form",{onSubmit:e[3]||(e[3]=$(o=>_(),["prevent"])),class:"flex flex-col gap-2"},[s("div",h,[s("div",j,[s("img",{src:a.avatar,class:"rounded-full size-36"},null,8,N),n(p,{icon:t(P),onClick:e[0]||(e[0]=o=>i.value=!0),disabled:!t(m)(["Account Settings/Update/All"],t(r).props.auth?.permissions),class:"w-full sm:w-auto",type:"button"},{default:d(()=>[...e[7]||(e[7]=[u(" Change Profile ",-1)])]),_:1},8,["icon","disabled"])]),s("div",T,[n(v,{name:"Name",modelValue:a.name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.name=o),error:t(r).props.errors.name},null,8,["modelValue","error"]),n(v,{name:"Email",type:"email",modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=o=>a.email=o),error:t(r).props.errors.email},null,8,["modelValue","error"]),s("div",z,[n(p,{icon:t(S),disabled:!t(m)(["Account Settings/Update/All"],t(r).props.auth?.permissions)},{default:d(()=>[...e[8]||(e[8]=[u(" Update ",-1)])]),_:1},8,["icon","disabled"])])])])],32),n(C,{name:"Upload Avatar",ratio:1,size:[300,300],modelValue:a.avatar,"onUpdate:modelValue":e[4]||(e[4]=o=>a.avatar=o),show:i.value,"onUpdate:show":e[5]||(e[5]=o=>i.value=o),onUpload:e[6]||(e[6]=o=>g())},null,8,["modelValue","show"])]),_:1},8,["icon"]))}});export{I as _};
